<div class="card card-body">
  <ul>
    <li>
      <div class="row">
        <div>Price</div>
        <div class="price">￥<%=product.price%></div>
      </div>
    </li>
    <li>
      <div class="row">
        <div>status</div>
        <div>
          <% if (product.countInStock> 0 ) { %>
          <span class="success"> 在庫あり </span>
          <% } else { %>
          <span class="error"> 在庫なし </span>
          <% } %>
        </div>
      </div>
    </li>
    <div class="row">
      <div>数量</div>
    </div>

    <script>
      function clicker() {
        qty = document.getElementById("cartNum").value;
        let cartFormLink = document.getElementById("cartFormUrl");
        cartFormLink.action = cartFormLink.action + "?qty=" + qty;
      }
    </script>

    <select id="cartNum" onchange="clicker()">
      <% for(let num = 1; num <= product.countInStock; num ++) { %>
      <option value="<%= num %>"><%= num %></option>
      <% } %>
    </select>
    <li>
      <form
        id="cartFormUrl"
        action="/addCartItem/<%=product._id%>"
        method="POST"
      >
        <button class="primary block" 　>カートに追加</button>
      </form>
    </li>
  </ul>
</div>
